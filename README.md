# Веб-сайт автосервиса (Backend)

Дипломный проект: Java-бэкенд для веб-сайта автосервиса.

## Описание

Бэкенд-часть веб-сайта автосервиса, разработанная на Java с использованием Spring Boot. Проект предоставляет REST API для работы с данными о пользователях, услугах, записях на услуги и отзывах.

## Функциональность

- Регистрация и авторизация пользователей с использованием JWT
- Управление услугами автосервиса
- Система онлайн-записи на услуги
- Система отзывов клиентов
- Административная панель для управления всеми аспектами сайта

## Технологии

- Java 17
- Spring Boot 2.7
- Spring Security с JWT-аутентификацией
- Spring Data JPA
- SQLite
- Maven
- Docker

## Требования для запуска

- JDK 17 или выше
- Maven 3.6 или выше
- Docker (опционально)

## Инструкция по установке и запуску

### Вариант 1: Запуск напрямую

1. Клонируйте репозиторий:
```bash
git clone https://your-repo/autoservice-web.git
cd autoservice-web
```

2. Соберите проект с помощью Maven:
```bash
mvn clean package
```

3. Запустите приложение:
```bash
java -jar target/autoservice-web-0.0.1-SNAPSHOT.jar
```

### Вариант 2: Запуск через Docker

1. Клонируйте репозиторий:
```bash
git clone https://your-repo/autoservice-web.git
cd autoservice-web
```

2. Соберите Docker-образ:
```bash
docker build -t autoservice-web .
```

3. Запустите контейнер:
```bash
docker run -p 8080:8080 autoservice-web
```

Или с использованием Docker Compose:
```bash
docker-compose up -d
```

## Структура API

Основные эндпоинты API:

### Аутентификация
- `POST /api/auth/login` - вход в систему
- `POST /api/auth/register` - регистрация пользователя

### Пользователи
- `GET /api/users/me` - получение данных текущего пользователя
- `PUT /api/users/me` - обновление данных текущего пользователя
- `GET /api/users` - получение списка всех пользователей (только для админов)
- `GET /api/users/{id}` - получение пользователя по ID (только для админов)
- `PUT /api/users/{id}` - обновление пользователя (только для админов)
- `DELETE /api/users/{id}` - удаление пользователя (только для админов)

### Услуги
- `GET /api/services` - получение списка всех услуг
- `GET /api/services/{id}` - получение услуги по ID
- `GET /api/services/category/{category}` - получение услуг по категории
- `GET /api/services/featured` - получение рекомендуемых услуг
- `GET /api/services/search?keyword={keyword}` - поиск услуг по ключевому слову
- `POST /api/services` - создание новой услуги (только для админов)
- `PUT /api/services/{id}` - обновление услуги (только для админов)
- `DELETE /api/services/{id}` - удаление услуги (только для админов)

### Записи на услуги
- `GET /api/appointments` - получение всех записей (только для админов)
- `GET /api/appointments/{id}` - получение записи по ID
- `GET /api/appointments/my` - получение записей текущего пользователя
- `GET /api/appointments/status/{status}` - получение записей по статусу (только для админов)
- `GET /api/appointments/date/{date}` - получение записей на определенную дату (только для админов)
- `POST /api/appointments` - создание новой записи
- `PUT /api/appointments/{id}/status` - обновление статуса записи (только для админов)
- `PUT /api/appointments/{id}` - обновление данных записи
- `PUT /api/appointments/{id}/cancel` - отмена записи пользователем
- `DELETE /api/appointments/{id}` - удаление записи (только для админов)

### Отзывы
- `GET /api/reviews/approved` - получение всех утвержденных отзывов (публичный доступ)
- `GET /api/reviews/user/{userId}` - получение всех отзывов пользователя
- `GET /api/reviews/service/{serviceId}` - получение всех отзывов для услуги
- `GET /api/reviews/{id}` - получение отзыва по ID
- `POST /api/reviews` - создание нового отзыва
- `GET /api/reviews` - получение всех отзывов (только для админов)
- `GET /api/reviews/pending` - получение всех неутвержденных отзывов (только для админов)
- `PUT /api/reviews/{id}/approve` - утверждение отзыва (только для админов)
- `PUT /api/reviews/{id}/reject` - отклонение отзыва (только для админов)
- `DELETE /api/reviews/{id}` - удаление отзыва (только для админов)

### Админ-панель
- `GET /api/admin/dashboard` - получение статистики для дашборда
- `GET /api/admin/latest-appointments` - получение последних записей
- `GET /api/admin/latest-reviews` - получение последних отзывов

## Безопасность

В приложении реализована аутентификация на основе JWT токенов и авторизация с использованием ролей:
- `ROLE_USER` - обычные пользователи
- `ROLE_ADMIN` - администраторы с расширенными правами

## База данных

Проект использует SQLite в качестве базы данных для упрощения развертывания. В реальном производственном окружении рекомендуется использовать более мощные СУБД, такие как PostgreSQL или MySQL.

## Разработка

Для разработки и тестирования API можно использовать инструменты, такие как Postman или Swagger UI.

## Лицензия

[MIT](LICENSE)